<!DOCTYPE html>
<html lang="cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">

<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/site-icon.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/site-icon.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/site-icon.jpg">
  <link rel="mask-icon" href="/images/site-icon.jpg" color="#222">
  <meta name="google-site-verification" content="bbrDOoVIlRq8ILDaV3dOe1EQ8RE8RSQBrNnrdfTplCE">
  <meta name="baidu-site-verification" content="q9emFHNSuh">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:300,300italic,400,400italic,700,700italic%7CNoto+Serif:300,300italic,400,400italic,700,700italic%7CFira+Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css" integrity="sha256-no0c5ccDODBwp+9hSmV5VvPpKwHCpbVzXHexIkupM6U=" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js" integrity="sha256-a5YRB27CcBwBFcT5EF/f3E4vzIqyHrSR878nseNYw64=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;www.aloha.org.cn&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Mist&quot;,&quot;version&quot;:&quot;8.4.0&quot;,&quot;exturl&quot;:true,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12,&quot;width&quot;:320},&quot;copycode&quot;:true,&quot;bookmark&quot;:{&quot;enable&quot;:true,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:true,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:true,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:&quot;utterances&quot;,&quot;storage&quot;:true,&quot;lazyload&quot;:true,&quot;nav&quot;:{&quot;utterances&quot;:{&quot;text&quot;:&quot;Comment with utterances&quot;,&quot;order&quot;:1}},&quot;activeClass&quot;:&quot;utterances&quot;},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:true,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;Searching...&quot;,&quot;empty&quot;:&quot;We didn&#39;t find any results for the search: ${query}&quot;,&quot;hits_time&quot;:&quot;${hits} results found in ${time} ms&quot;,&quot;hits&quot;:&quot;${hits} results found&quot;},&quot;path&quot;:&quot;&#x2F;search.xml&quot;,&quot;localsearch&quot;:{&quot;enable&quot;:true,&quot;trigger&quot;:&quot;auto&quot;,&quot;top_n_per_article&quot;:-1,&quot;unescape&quot;:false,&quot;preload&quot;:false}}</script>
<meta name="description" content="Personal arrangement of UltiSnips&#39; official documentation. My snippets: https:&#x2F;&#x2F;github.com&#x2F;alohaia&#x2F;nvimcfg&#x2F;tree&#x2F;lua&#x2F;UltiSnips">
<meta property="og:type" content="article">
<meta property="og:title" content="Create Snippets for UltiSnips">
<meta property="og:url" content="https://www.aloha.org.cn/Learning/Computer/Vim-NeoVim/Create-Snippets-for-Ultisnips/">
<meta property="og:site_name" content="Aloha&#39;s Blog">
<meta property="og:description" content="Personal arrangement of UltiSnips&#39; official documentation. My snippets: https:&#x2F;&#x2F;github.com&#x2F;alohaia&#x2F;nvimcfg&#x2F;tree&#x2F;lua&#x2F;UltiSnips">
<meta property="og:locale">
<meta property="article:published_time" content="2021-03-28T07:15:22.000Z">
<meta property="article:modified_time" content="2021-08-11T10:08:04.842Z">
<meta property="article:author" content="Qihuan Liu">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Vim&#x2F;NeoVim">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.aloha.org.cn/Learning/Computer/Vim-NeoVim/Create-Snippets-for-Ultisnips/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;cn&quot;,&quot;comments&quot;:true,&quot;permalink&quot;:&quot;https:&#x2F;&#x2F;www.aloha.org.cn&#x2F;Learning&#x2F;Computer&#x2F;Vim-NeoVim&#x2F;Create-Snippets-for-Ultisnips&#x2F;&quot;,&quot;path&quot;:&quot;Learning&#x2F;Computer&#x2F;Vim-NeoVim&#x2F;Create-Snippets-for-Ultisnips&#x2F;&quot;,&quot;title&quot;:&quot;Create Snippets for UltiSnips&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>Create Snippets for UltiSnips | Aloha's Blog</title><script src="/js/config.js"></script><script src="/lib/fireworks.js"></script>
  





  <!-- <script src="/js/hoverdetail.js"></script> -->

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Aloha's Blog" type="application/atom+xml">
<link rel="alternate" href="/rss2.xml" title="Aloha's Blog" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Aloha's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">不乱于心，不困于情。不畏将来，不念过往。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">28</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">26</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">72</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#include-other-snippet-files"><span class="nav-number">1.</span> <span class="nav-text">Include Other Snippet Files</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#keywords"><span class="nav-number">2.</span> <span class="nav-text">Keywords</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#snippets-format"><span class="nav-number">3.</span> <span class="nav-text">Snippets&#39; Format</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#snippet-options"><span class="nav-number">4.</span> <span class="nav-text">Snippet Options</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#character-escaping"><span class="nav-number">5.</span> <span class="nav-text">Character Escaping</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#plaintext-snippets"><span class="nav-number">6.</span> <span class="nav-text">Plaintext Snippets</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tabstop-and-placeholders"><span class="nav-number">7.</span> <span class="nav-text">Tabstop and Placeholders</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#visual-placeholder"><span class="nav-number">8.</span> <span class="nav-text">Visual Placeholder</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mirrors"><span class="nav-number">9.</span> <span class="nav-text">Mirrors</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#interpolation"><span class="nav-number">10.</span> <span class="nav-text">Interpolation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shellcode"><span class="nav-number">10.1.</span> <span class="nav-text">Shellcode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vimscript"><span class="nav-number">10.2.</span> <span class="nav-text">Vimscript</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#python"><span class="nav-number">10.3.</span> <span class="nav-text">Python</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#global-snippets"><span class="nav-number">11.</span> <span class="nav-text">Global Snippets</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#transformations"><span class="nav-number">12.</span> <span class="nav-text">Transformations</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#regular-expression"><span class="nav-number">12.1.</span> <span class="nav-text">Regular Expression</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#replacement-string"><span class="nav-number">12.2.</span> <span class="nav-text">Replacement String</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#options"><span class="nav-number">12.3.</span> <span class="nav-text">Options</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cleardisable-snippets"><span class="nav-number">13.</span> <span class="nav-text">Clear(Disable) Snippets</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#context"><span class="nav-number">14.</span> <span class="nav-text">Context</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#snippet-actions"><span class="nav-number">15.</span> <span class="nav-text">Snippet Actions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pre-expand-and-post-expand-actions"><span class="nav-number">15.1.</span> <span class="nav-text">Pre-expand and Post-expand Actions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#post-jump-actions"><span class="nav-number">15.2.</span> <span class="nav-text">Post-jump Actions</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Qihuan Liu"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Qihuan Liu</p>
  <div class="site-description" itemprop="description">追寻罗素先生的脚步，渴望寻找到我想要的答案。</div>
</div>
<div class="sidebar-quote">
<p class="sidebar-quote-content" onclick="toggleFull()">主人不来过夜半，闲敲棋子落灯花。</p>
<p class="sidebar-quote-from">——</p>
</div>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
<script type="text/javascript">
  var poem_part, poem_full
  jinrishici.load(function(result) {
    var sentence = document.querySelector(".sidebar-quote-content")
    var info = document.querySelector(".sidebar-quote-from")
    poem_part = sentence.innerHTML = result.data.content
    info.innerHTML = '——' + result.data.origin.dynasty + '·' + result.data.origin.author + '《' + result.data.origin.title + '》'
    const indent = "&nbsp".repeat(8)
    poem_full = indent + result.data.origin.content.join('<br/>' + indent)
  });
  var FULLYSHOWED = false;
  function toggleFull() {
    var sentence = document.querySelector(".sidebar-quote-content")
    if (FULLYSHOWED) {
      sentence.innerHTML = poem_part
      /* sentence.style["text-align"] = "left" */
      FULLYSHOWED = false
    } else {
      sentence.innerHTML = poem_full
      /* sentence.style["text-align"] = "center" */
      FULLYSHOWED = true
    }
  }
</script>
<!-- require APlayer -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

<meting-js
  server="netease"
  type="playlist"
  id="6822976600"
  mini="false"
  fixed="false"
  list-folded="NaN"
  autoplay="false"
  volume="0.4"
  theme=""
  order="random"
  loop="all"
  preload="auto"
  mutex="true">
</meting-js>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">72</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>


  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>
      RSS
    </a>
  </div>

  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Fsb2hhaWE=" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;alohaia"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOmxpdS5xaWh1YW5Ab3V0bG9vay5jb20=" title="E-Mail → mailto:liu.qihuan@outlook.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <span class="exturl" data-url="aHR0cHM6Ly93d3cuc2Rpb3BpZC50b3Av" title="https:&#x2F;&#x2F;www.sdiopid.top&#x2F;">SDIOPID</span>
        </li>
    </ul>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="Back to top">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Fsb2hhaWE=" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="cn">
    <link itemprop="mainEntityOfPage" href="https://www.aloha.org.cn/Learning/Computer/Vim-NeoVim/Create-Snippets-for-Ultisnips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qihuan Liu">
      <meta itemprop="description" content="追寻罗素先生的脚步，渴望寻找到我想要的答案。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aloha's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Create Snippets for UltiSnips
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-28 15:15:22" itemprop="dateCreated datePublished" datetime="2021-03-28T15:15:22+08:00">2021-03-28</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-08-11 18:08:04" itemprop="dateModified" datetime="2021-08-11T18:08:04+08:00">2021-08-11</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Learning/" itemprop="url" rel="index"><span itemprop="name">Learning</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Learning/Computer/" itemprop="url" rel="index"><span itemprop="name">Computer</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Learning/Computer/Vim-NeoVim/" itemprop="url" rel="index"><span itemprop="name">Vim/NeoVim</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>16k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>14 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Personal arrangement of <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1NpclZlci91bHRpc25pcHM=">UltiSnips<i class="fa fa-external-link-alt"></i></span>' official documentation.</p>
<p>My snippets: <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Fsb2hhaWEvbnZpbWNmZy90cmVlL2x1YS9VbHRpU25pcHM=">https://github.com/alohaia/nvimcfg/tree/lua/UltiSnips<i class="fa fa-external-link-alt"></i></span></p>
<span id="more"></span>
<h2 id="include-other-snippet-files">Include Other Snippet Files<a class="markdownIt-Anchor" href="#include-other-snippet-files"></a></h2>
<p>Add c snippets for cpp files for example.</p>
<ol>
<li><code>UltiSnipsAddFiletypes</code>: <figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">au</span> FileType cpp UltiSnipsAddFiletypes cpp.<span class="keyword">c</span></span><br></pre></td></tr></table></figure>
</li>
<li><code>extends</code>: For example, in <code>cpp.snippets</code>, add: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">extends c</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="keywords">Keywords<a class="markdownIt-Anchor" href="#keywords"></a></h2>
<ol>
<li><code>extends</code>: See above.</li>
<li><code>priority</code>: Set priority for all snippet defined in the current file.</li>
<li><code>snippets</code> <code>endsnippet</code>: Define a snippet.</li>
<li><code>global</code> <code>endglobal</code>: Define a <a href="#global-snippets">global snippet</a>(only supports python currently).</li>
<li><code>pre_expand</code> <code>post_expand</code> <code>post_jump</code>: Declare snippet actions.</li>
</ol>
<h2 id="snippets-format">Snippets' Format<a class="markdownIt-Anchor" href="#snippets-format"></a></h2>
<pre><code>snippet trigger_word [ &quot;description&quot; [ options ] ]
...
endsnippet
</code></pre>
<ul>
<li><code>trigger_word</code>: The word to trigger the snippet. It can include spaces via wrap it in quotes or any other characters.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">snippet &quot;tab trigger&quot; [ &quot;description&quot; [ options ] ]</span><br><span class="line">snippet ltab triggerl [ &quot;description&quot; [ options ] ]</span><br></pre></td></tr></table></figure>
Quotes can be included as part of the trigger by wrapping the trigger in
another character.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snippet !&quot;tab trigger&quot;! [ &quot;description&quot; [ options ] ]</span><br></pre></td></tr></table></figure>
</li>
<li><code>description</code>: A string describing the trigger.</li>
<li><code>options</code>: See below.</li>
</ul>
<h2 id="snippet-options">Snippet Options<a class="markdownIt-Anchor" href="#snippet-options"></a></h2>
<ul>
<li><code>b</code>: Beginning of line - A snippet with this option is expanded only if the tab trigger is the first word on the line. In other words, if only whitespace precedes the tab trigger, expand. The default is to expand snippets at any position regardless of the preceding non-whitespace characters.</li>
<li><code>i</code>: In-word expansion - By default a snippet is expanded only if the tab trigger is the first word on the line or is preceded by one or more whitespace characters. A snippet with this option is expanded regardless of the preceding character. In other words, the snippet can be triggered in the middle of a word.</li>
<li><code>w</code>: Word boundary - With this option, the snippet is expanded if the tab trigger start matches a word boundary and the tab trigger end matches a word boundary. In other words the tab trigger must be preceded and followed by non-word characters. Word characters are defined by the <code>iskeyword</code> setting. Use this option, for example, to permit expansion where the tab trigger follows punctuation without expanding suffixes of larger words.</li>
<li><code>r</code>: Regular expression - With this option, the tab trigger is expected to be a python regular expression. The snippet is expanded if the recently typed characters match the regular expression. Note: The regular expression MUST be quoted (or surrounded with another character) like a multi-word tab trigger (see above) whether it has spaces or not. A resulting match is passed to any python code blocks in the snippet definition as the local variable &quot;match&quot;.</li>
<li><code>t</code>: Do not expand tabs - If a snippet definition includes leading tab characters, by default UltiSnips expands the tab characters honoring the Vim <code>shiftwidth</code>, <code>softtabstop</code>, <code>expandtab</code> and <code>tabstop</code> indentation settings. (For example, if <code>expandtab</code> is set, the tab is replaced with spaces.) If this option is set, UltiSnips will ignore the Vim settings and insert the tab characters as is. This option is useful for snippets involved with tab delimited formats.</li>
<li><code>s</code>: Remove whitespace immediately before the cursor at the end of a line before jumping to the next tabstop.  This is useful if there is a tabstop with optional text at the end of a line.</li>
<li><code>m</code>: Trim all whitespaces from right side of snippet lines. Useful when snippet contains empty lines which should remain empty after expanding. Without this option empty lines in snippets definition will have indentation too.</li>
<li><code>e</code>: Custom context snippet - With this option expansion of snippet can be controlled not only by previous characters in line, but by any given python expression. This option can be specified along with other options, like <code>b</code>. See UltiSnips-custom-context-snippets for more info.</li>
<li><code>A</code>: Snippet will be triggered automatically, when condition matches. See UltiSnips-autotrigger for more info.</li>
</ul>
<h2 id="character-escaping">Character Escaping<a class="markdownIt-Anchor" href="#character-escaping"></a></h2>
<blockquote>
<p>In snippet definitions, the characters <code>`</code>, <code>&#123;</code>, <code>$</code> and <code>\</code> have special
meaning. If you want to insert one of these characters literally, escape them
with a backslash, <code>\</code>.</p>
</blockquote>
<h2 id="plaintext-snippets">Plaintext Snippets<a class="markdownIt-Anchor" href="#plaintext-snippets"></a></h2>
<p>For example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">snippet bye &quot;My mail signature&quot;</span><br><span class="line">Good bye, Sir. Hope to talk to you soon.</span><br><span class="line">- Arthur, King of Britain</span><br><span class="line">endsnippet</span><br></pre></td></tr></table></figure>
<h2 id="tabstop-and-placeholders">Tabstop and Placeholders<a class="markdownIt-Anchor" href="#tabstop-and-placeholders"></a></h2>
<p>A simplest tabstop looks like <code>$no</code>, <code>no</code> is a number starting from 1. <code>$0</code> is a special tabstop that is always the last tabstop no matter how many tabstops are defined.</p>
<pre><code>snippet letter
Dear $1,
$0
Yours sincerely,
$2
endsnippet
</code></pre>
<p>Default text:</p>
<pre><code>snippet case
case $&#123;1:word&#125; in
    $&#123;2:pattern&#125; ) $0;;
esac
endsnippet
</code></pre>
<p>Have a tabstop within another tabstop:</p>
<pre><code>snippet a
&lt;a href=&quot;$&#123;1:http://www.$&#123;2:example.com&#125;&#125;&quot;
    $0
&lt;/a&gt;
endsnippet
</code></pre>
<blockquote>
<p>Typing any text at the first tabstop replaces the default
value, including the second tabstop, with the typed text. So the second
tabstop is essentially deleted.</p>
</blockquote>
<h2 id="visual-placeholder">Visual Placeholder<a class="markdownIt-Anchor" href="#visual-placeholder"></a></h2>
<p>Format:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;VISUAL:default/search/replace/option&#125;</span><br></pre></td></tr></table></figure>
<p>Usage:</p>
<ol>
<li>Select some text in visual mode and press the trigger key, the text well be deleted.</li>
<li>Enter the <code>trigger_word</code> and press the trigger key again, the text deleted will replace the <code>$&#123;VISUAL&#125;</code> placeholder.</li>
</ol>
<p>Details:</p>
<ol>
<li>Snippets containing Visual Placeholder can be used in insert mod. In the way, the <code>default</code> will be used as default text.</li>
<li>With <code>/search/replace/option</code>, you can process the text like using <code>:s</code> command. See <a href="#transformations">Transformations</a>.</li>
</ol>
<h2 id="mirrors">Mirrors<a class="markdownIt-Anchor" href="#mirrors"></a></h2>
<p>Mirrors repeat the content of a <span class="exturl" data-url="aHR0cDovL3RhYnN0b3AuVG8=">tabstop.To<i class="fa fa-external-link-alt"></i></span> mirror a tabstop simply insert the tabstop again using the &quot;dollar sign followed by a number&quot; syntax, e.g., <code>$1</code>.</p>
<pre><code>snippet ifndef
#ifndef $&#123;1:SOME_DEFINE&#125;
#define $1
$0
#endif /* $1 */
endsnippet
</code></pre>
<h2 id="interpolation">Interpolation<a class="markdownIt-Anchor" href="#interpolation"></a></h2>
<h3 id="shellcode">Shellcode<a class="markdownIt-Anchor" href="#shellcode"></a></h3>
<p>An example may be the most helpful.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">snippet today</span><br><span class="line">Today is the `date +%d.%m.%y`.</span><br><span class="line">endsnippet</span><br></pre></td></tr></table></figure>
<p>The output of command <code>date +%d.%m%y</code> will replace the text wrapped by backticks. You`ll get something like &quot;Today is the 19.08.20.&quot;</p>
<h3 id="vimscript">Vimscript<a class="markdownIt-Anchor" href="#vimscript"></a></h3>
<p>Similar to shellcode, but begins with `v.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">snippet indent</span><br><span class="line">Indent is: `!v indent(&quot;.&quot;)`.</span><br><span class="line">endsnippet</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(note the 4 spaces in front): indent&lt;trigger_key&gt; -&gt;</span><br><span class="line">(note the 4 spaces in front): Indent is: 4.</span><br></pre></td></tr></table></figure>
<h3 id="python">Python<a class="markdownIt-Anchor" href="#python"></a></h3>
<p>There are two choices:</p>
<ol>
<li><strong>`#!/usr/bin/python ...`</strong>: Normal python code.</li>
<li><strong>`!p ...`</strong>: Use python with some predefined objects and variables. The variables automatically defined in python code are:</li>
</ol>
<table>
<thead>
<tr>
<th>variable</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>fn</td>
<td>The current filename</td>
</tr>
<tr>
<td>path</td>
<td>The complete path to the current file</td>
</tr>
<tr>
<td>t</td>
<td>The values of the placeholders, <code>t[1]</code> is the text of <code>$&#123;1&#125;</code>, etc.</td>
</tr>
<tr>
<td>snip</td>
<td>UltiSnips.TextObjects.SnippetUtil object instance. Has methods that simplify indentation handling and owns the string that should be inserted for the snippet.</td>
</tr>
<tr>
<td>context</td>
<td>Result of context condition. See UltiSnips-custom-context-snippets.</td>
</tr>
<tr>
<td>match</td>
<td>Only in regular expression triggered snippets.<br/> This is the return value of the match of the regular expression.<br/> See <span class="exturl" data-url="aHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3JlLmh0bWwjbWF0Y2gtb2JqZWN0cw==">http://docs.python.org/library/re.html#match-objects<i class="fa fa-external-link-alt"></i></span></td>
</tr>
</tbody>
</table>
<p><strong><code>snip</code> object</strong></p>
<p>The <code>snip</code> object provides the following methods:</p>
<ul>
<li><code>snip.mkline(line=&quot;&quot;, indent=None)</code>:
Returns a line ready to be appended to the result. If indent
is None, then mkline prepends spaces and/or tabs appropriate to the
current <code>tabstop</code> and <code>expandtab</code> variables.</li>
<li><code>snip.shift(amount=1)</code>:
Shifts the default indentation level used by mkline right by the
number of spaces defined by <code>shiftwidth</code>, <code>amount</code> times.</li>
<li><code>snip.unshift(amount=1)</code>:
Shifts the default indentation level used by mkline left by the
number of spaces defined by <code>shiftwidth</code>, <code>amount</code> times.</li>
<li><code>snip.reset_indent()</code>:
Resets the indentation level to its initial value.</li>
<li><code>snip.opt(var, default)</code>:
Checks if the Vim variable <code>var</code> has been set. If so, it returns the
variable<code>s value; otherwise, it returns the value of</code>default`.</li>
</ul>
<p>The <code>snip</code> object provides some properties as well:</p>
<ul>
<li>
<p><code>snip.rv</code>:
<code>rv</code> is the return value, the text that will replace the python block
in the snippet definition. It is initialized to the empty string. This
deprecates the <code>res</code> variable.</p>
</li>
<li>
<p><code>snip.c</code>:
The text currently in the python block<code>s position within the snippet. It is set to empty string as soon as interpolation is completed. Thus you can check</code>if <code>snip.c</code> is != &quot;&quot;` to make sure that the interpolation
is only done once. This deprecates the &quot;cur&quot; variable.</p>
</li>
<li>
<p><code>snip.v</code>:
Data related to the <code>$&#123;VISUAL&#125;</code> placeholder. This has two attributes:
<code>snip.v.mode</code>   (<code>v</code>, <code>V</code>, <code>^V</code>, see |visual-mode| )
<code>snip.v.text</code>   The text that was selected.</p>
</li>
<li>
<p><code>snip.fn</code>:
The current filename.</p>
</li>
<li>
<p><code>snip.basename</code>:
The current filename with the extension removed.</p>
</li>
<li>
<p><code>snip.ft</code>:
The current filetype.</p>
</li>
<li>
<p><code>snip.p</code>:
Last selected placeholder. Will contain placeholder object with
following properties:</p>
<ul>
<li><code>current_text</code> - text in the placeholder on the moment of selection;</li>
<li><code>start</code> - placeholder start on the moment of selection;</li>
<li><code>end</code> - placeholder end on the moment of selection;</li>
</ul>
</li>
</ul>
<p>For your convenience, the <code>snip</code> object also provides the following
operators:</p>
<ul>
<li><code>snip &gt;&gt; amount</code>:
Equivalent to <code>snip.shift(amount)</code></li>
<li><code>snip &lt;&lt; amount</code>:
Equivalent to <code>snip.unshift(amount)</code></li>
<li><code>snip += line</code>:
Equivalent to &quot;<code>snip.rv +=</code>\n<code>+ snip.mkline(line)</code>&quot;</li>
</ul>
<blockquote>
<p>Any variables defined in a python block can be used in other python blocks
that follow within the same snippet. Also, the python modules <code>vim</code>, <code>re</code>,
<code>os</code>, <code>string</code> and <code>random</code> are pre-imported within the scope of snippet code.
Other modules can be imported using the python <code>import</code> command.</p>
</blockquote>
<blockquote>
<p>Python code allows for very flexible snippets. For example, the following
snippet mirrors the first tabstop value on the same line but right aligned and
in uppercase.</p>
</blockquote>
<h2 id="global-snippets">Global Snippets<a class="markdownIt-Anchor" href="#global-snippets"></a></h2>
<p>Use <code>global</code> and <code>endglobal</code> to define Global snippets.</p>
<p>You can define functions or use import command inside.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">global !p</span><br><span class="line">def upper_right(inp):</span><br><span class="line">    return (75 - 2 * len(inp))*` ` + inp.upper()</span><br><span class="line">endglobal</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">global !p</span><br><span class="line">from my_snippet_helpers import *</span><br><span class="line">endglobal</span><br></pre></td></tr></table></figure>
<h2 id="transformations">Transformations<a class="markdownIt-Anchor" href="#transformations"></a></h2>
<blockquote>
<p>Transformations are like mirrors but instead of just copying text from the
original tabstop verbatim, a regular expression is matched to the content of
the referenced tabstop and a transformation is then applied to the matched
pattern.</p>
</blockquote>
<pre><code>$&#123;&lt;tab_stop_no/regular_expression/replacement/options&#125;
</code></pre>
<p>The <strong>components</strong> are defined as follows:</p>
<ul>
<li><code>tab_stop_no</code>: The number of the tabstop to reference</li>
<li><code>regular_expression</code>: The regular expression the value of the referenced tabstop is matched on</li>
<li><code>replacement</code>: The replacement string, explained in detail below</li>
<li><code>options</code>: Options for the regular expression</li>
</ul>
<h3 id="regular-expression">Regular Expression<a class="markdownIt-Anchor" href="#regular-expression"></a></h3>
<p>See <span class="exturl" data-url="aHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3JlLmh0bWw=">http://docs.python.org/library/re.html<i class="fa fa-external-link-alt"></i></span>.</p>
<h3 id="replacement-string">Replacement String<a class="markdownIt-Anchor" href="#replacement-string"></a></h3>
<p>The <strong>replacement string</strong> can contain <code>$no</code> variables, e.g., <code>$1</code>, which reference matched groups in the regular expression. The <code>$0</code> variable is special and yields the whole match. The replacement string can also contain special escape sequences:</p>
<ul>
<li><code>\u</code>: Uppercase next letter</li>
<li><code>\l</code>: Lowercase next letter</li>
<li><code>\U</code>: Uppercase everything till the next \E</li>
<li><code>\L</code>: Lowercase everything till the next \E</li>
<li><code>\E</code>: End upper or lowercase started with \L or \U</li>
<li><code>\n</code>: A newline</li>
<li><code>\t</code>: A literal tab</li>
</ul>
<p>Finally, the <strong>replacement string</strong> can contain conditional replacements using the syntax (<strong>?no:text:other text</strong>). This reads as follows: if the group <code>$no</code> has
matched, insert &quot;text&quot;, otherwise insert &quot;other text&quot;. &quot;other text&quot; is
optional and if not provided defaults to the empty string, &quot;&quot;. This feature
is very powerful. It allows you to add optional text into snippets.</p>
<h3 id="options">Options<a class="markdownIt-Anchor" href="#options"></a></h3>
<p>The <strong>options</strong> can be any combination of</p>
<ul>
<li>
<p><code>g</code>: <strong>global replace</strong></p>
<p>By default, only the first match of the regular expression is
replaced. With this option all matches are replaced.</p>
</li>
<li>
<p><code>i</code>: <strong>case insensitive</strong></p>
<p>By default, regular expression matching is case sensitive. With this
option, matching is done without regard to case.</p>
</li>
<li>
<p><code>m</code>: <strong>multiline</strong></p>
<p>By default, the <code>\^</code> and <code>\$</code> special characters only apply to the
start and end of the entire string; so if you select multiple lines,
transformations are made on them entirely as a whole single line
string. With this option, <code>^</code> and <code>\$</code> special characters match the
start or end of any line within a string ( separated by newline
character - <code>\n</code> ).</p>
</li>
<li>
<p><code>a</code>: <strong>ascii conversion</strong></p>
<p>By default, transformation are made on the raw utf-8 string. With
this option, matching is done on the corresponding ASCII string
instead, for example <code>à</code> will become <code>a</code>.
This option required the python package <code>unidecode</code>.</p>
</li>
</ul>
<h2 id="cleardisable-snippets">Clear(Disable) Snippets<a class="markdownIt-Anchor" href="#cleardisable-snippets"></a></h2>
<p>Add <code>clearsnippets</code> to snippet files to disable some specified snippets.</p>
<ol>
<li>
<p>Disable by priority.</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">priority 6</span><br><span class="line">clearsnippets</span><br></pre></td></tr></table></figure>
<p>Disable all snippets have priority not bigger than 6.</p>
</li>
<li>
<p>Disable by trigger.</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clearsnippets printf title box</span><br></pre></td></tr></table></figure>
<p>Disable snippets whose trigger word is <code>printf</code>, <code>title</code> or <code>box</code>. To do this, the priority of <code>clearsnippets</code> must not be smaller than other snippets`.</p>
</li>
</ol>
<h2 id="context">Context<a class="markdownIt-Anchor" href="#context"></a></h2>
<p>Custom context snippets can be enabled by using the <code>e</code> option in the snippet
definition.</p>
<p>In that case snippet should be defined using this syntax:</p>
<pre><code>snippet trigger_word &quot;description&quot; &quot;expression&quot; options
</code></pre>
<p>The context can be defined using a special header:</p>
<pre><code>context &quot;python_expression&quot;
snippet trigger_word &quot;description&quot; options
</code></pre>
<p>The <code>expression</code> can be any python expression. If <code>expression</code> evaluates to
<code>True</code>, then this snippet will be eligible for expansion. The <code>expression</code>
must be wrapped with <strong>double-quotes</strong>.</p>
<p>The following <strong>python modules</strong> are automatically imported into the scope before
<code>expression</code> is evaluated: <strong><code>re</code>, <code>os</code>, <code>vim</code>, <code>string</code>, <code>random</code></strong>.</p>
<p>Global variable <code>snip</code> will be available with following properties:</p>
<ul>
<li>
<p><code>snip.window</code>: alias for <code>vim.current.window</code></p>
</li>
<li>
<p><code>snip.buffer</code>: alias for <code>vim.current.window.buffer</code></p>
<blockquote>
<p>Note: special variable called <code>snip.buffer</code> should be used for all buffer
modifications. Not <code>vim.current.buffer</code> and not <code>vim.command(&quot;...&quot;)</code>, because
in that case UltiSnips will not be able to track changes to the buffer correctly.</p>
<p><code>snip.buffer</code> has the same interface as <code>vim.current.window.buffer</code>.</p>
</blockquote>
</li>
<li>
<p><code>snip.cursor</code>: cursor object, which behaves like <code>vim.current.window.cursor</code>, but zero-indexed and with following additional methods:</p>
<ul>
<li><code>preserve()</code>: special method for executing pre/post/jump actions;</li>
<li><code>set(line, column)</code>: sets cursor to specified line and column;</li>
<li><code>to_vim_cursor()</code>: returns 1-indexed cursor, suitable for assigning to <code>vim.current.window.cursor</code>;</li>
</ul>
</li>
<li>
<p><code>snip.contex</code>: evaluated value of the expression in <strong>context</strong>;</p>
</li>
<li>
<p><code>snip.line</code> and <code>snip.column</code>: aliases for cursor position (zero-indexed);</p>
</li>
<li>
<p><code>snip.visual_mode</code>: (<code>v</code>, <code>V</code>, <code>^V</code>, see visual-mode);</p>
</li>
<li>
<p><code>snip.visual_text</code>: last visually-selected text;</p>
</li>
<li>
<p><code>snip.last_placeholder</code>: last active placeholder from previous snippet with following properties:</p>
<ul>
<li><code>current_text</code>: text in the placeholder on the moment of selection;</li>
<li><code>start</code>: placeholder start on the moment of selection;</li>
<li><code>end</code>: placeholder end on the moment of selection;</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">snippet i &quot;if err != nil&quot; &quot;re.match(`^\s+[^=]*err\s*:?=`, snip.buffer[snip.line-1])&quot; be</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    $1</span><br><span class="line">&#125;</span><br><span class="line">endsnippet</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">global !p</span><br><span class="line">import my_utils</span><br><span class="line">endglobal</span><br><span class="line"></span><br><span class="line">snippet , &quot;return ..., nil/err&quot; &quot;my_utils.is_return_argument(snip)&quot; ie</span><br><span class="line">, `!p if my_utils.is_in_err_condition():</span><br><span class="line">    snip.rv = &quot;err&quot;</span><br><span class="line">else:</span><br><span class="line">    snip.rv = &quot;nil&quot;`</span><br><span class="line">endsnippet</span><br></pre></td></tr></table></figure>
<h2 id="snippet-actions">Snippet Actions<a class="markdownIt-Anchor" href="#snippet-actions"></a></h2>
<ul>
<li>Pre-expand: invoked just after trigger condition was matched, but before snippet actually expanded;</li>
<li>Post-expand: invoked after snippet was expanded and interpolations were applied for the first time, but before jump on the first placeholder.</li>
<li>Jump: invoked just after a jump to the next/prev placeholder.</li>
</ul>
<blockquote>
<p>Specified code will be evaluated at stages defined above and same global
variables and modules will be available that are stated in
the UltiSnips-custom-context-snippets section.</p>
</blockquote>
<p><code>snip.visual_content</code> will be also declared and will contain text that was selected before snippet expansion (similar to <code>$VISUAL</code> placeholder).</p>
<pre><code>pre_expand &quot;snip.buffer[snip.line] = ``; snip.cursor.set(snip.line, len(snip.visual_content))&quot;
snippet &quot;nothing done here&quot;
$&#123;VISUAL&#125;
endsnippet
</code></pre>
<h3 id="pre-expand-and-post-expand-actions">Pre-expand and Post-expand Actions<a class="markdownIt-Anchor" href="#pre-expand-and-post-expand-actions"></a></h3>
<p>Buffer can be modified in pre-expand action code through variable called
<code>snip.buffer</code>, snippet expansion position will be automatically adjusted.</p>
<pre><code>pre_expand &quot;snip.buffer[snip.line] = ` `*4; snip.cursor.set(snip.line, 4)&quot;
snippet d
def $1():
    $0
endsnippet

post_expand &quot;snip.buffer[snip.snippet_end[0]+1:snip.snippet_end[0]+1] = [``]&quot;
snippet d &quot;Description&quot; b
def $1():
    $2
endsnippet
</code></pre>
<h3 id="post-jump-actions">Post-jump Actions<a class="markdownIt-Anchor" href="#post-jump-actions"></a></h3>
<p>Post-jump actions can be used to trigger some code based on user input into the placeholders.</p>
<p>Notable use <strong>cases</strong>:</p>
<ul>
<li>Expand another snippet after jump or anonymous snippet after last jump (e.g. perform move method refactoring and
then insert new method invokation);</li>
<li>Insert heading into TOC after last jump.</li>
</ul>
<p><strong>Variables</strong> and <strong>methods</strong> below will be also defined in the action code scope:</p>
<ul>
<li><code>snip.tabstop</code>: zero-indexed number of tabstop jumped onto;
<ul>
<li><code>start</code>: (line, column) of the starting position of the tabstop (also accessible as <code>tabstop.line</code> and <code>tabstop.col</code>).</li>
<li><code>end</code>: (line, column) of the ending position;</li>
<li><code>current_text</code>: text inside the tabstop.</li>
</ul>
</li>
<li><code>snip.jump_direction</code>: <code>1</code> if jumped forward and <code>-1</code> otherwise;</li>
<li><code>snip.tabstops</code>: list with tabstop objects, see above;</li>
<li><code>snip.snippet_start</code>: (line, column) of start of the expanded snippet;</li>
<li><code>snip.snippet_end</code>: (line, column) of end of the expanded snippet;</li>
<li><code>snip.expand_anon()</code>: alias for <code>UltiSnips_Manager.expand_anon()</code>;</li>
</ul>
<blockquote>
<p>Also note that you should use <code>snip.buffer</code>, rather than than any other way, to edit buffer content.</p>
</blockquote>
<p>Following snippet will insert section in the Table of Contents in the vim-help file:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">post_jump &quot;if snip.tabstop == 0: insert_toc_item(snip.tabstops[1], snip.buffer)&quot;</span><br><span class="line">snippet s &quot;section&quot; b</span><br><span class="line">`!p insert_delimiter_0(snip, t)`$1`!p insert_section_title(snip, t)`</span><br><span class="line">`!p insert_delimiter_1(snip, t)`</span><br><span class="line">$0</span><br><span class="line">endsnippet</span><br></pre></td></tr></table></figure>
<blockquote>
<p>The functions called in this snippet are not defined by Ultisnips.</p>
</blockquote>
<p>Following example will insert method call at the end of file after user jump out of method declaration snippet.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">global !p</span><br><span class="line">def insert_method_call(name):</span><br><span class="line">	vim.command(`normal G`)</span><br><span class="line">	snip.expand_anon(name + `($1)\n`)</span><br><span class="line">endglobal</span><br><span class="line"></span><br><span class="line">post_jump &quot;if snip.tabstop == 0: insert_method_call(snip.tabstops[1].current_text)&quot;</span><br><span class="line">snippet d &quot;method declaration&quot; b</span><br><span class="line">def $1():</span><br><span class="line">	$2</span><br><span class="line">endsnippet</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>Qihuan Liu
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://www.aloha.org.cn/Learning/Computer/Vim-NeoVim/Create-Snippets-for-Ultisnips/" title="Create Snippets for UltiSnips">https://www.aloha.org.cn/Learning/Computer/Vim-NeoVim/Create-Snippets-for-Ultisnips/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> unless stating additionally.
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a>
              <a href="/tags/Vim-NeoVim/" rel="tag"><i class="fa fa-tag"></i> Vim/NeoVim</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Learning/Medicine/%E7%97%85%E5%8E%9F%E7%94%9F%E7%89%A9%E5%AD%A6/%E5%8C%96%E8%84%93%E6%80%A7%E7%BB%86%E8%8F%8C/" rel="prev" title="化脓性细菌">
                  <i class="fa fa-chevron-left"></i> 化脓性细菌
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Learning/Medicine/%E7%97%85%E5%8E%9F%E7%94%9F%E7%89%A9%E5%AD%A6/%E6%B6%88%E5%8C%96%E9%81%93%E6%84%9F%E6%9F%93%E7%BB%86%E8%8F%8C/" rel="next" title="消化道感染细菌">
                  消化道感染细菌 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div><script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qihuan Liu</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Symbols count total: </span>
    <span title="Symbols count total">231k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">3:30</span>
  </span>
</div>
  <div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9taXN0Lw==">NexT.Mist</span>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script>

<script data-pjax>
$('a.markdownIt-Anchor').parent().mouseenter(function(){$(this).children('a.markdownIt-Anchor').css('visibility','visible')})
$('a.markdownIt-Anchor').parent().mouseleave(function(){$(this).children('a.markdownIt-Anchor').css('visibility','hidden')})
</script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  
<script src="/js/third-party/search/local-search.js"></script>



  <script class="next-config" data-name="pdf" type="application/json">{&quot;object_url&quot;:{&quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;pdfobject@2.2.5&#x2F;pdfobject.min.js&quot;,&quot;integrity&quot;:&quot;sha256-YuNlP9i6s&#x2F;WH7EaU2kErloo9Vc85C3WVqhoMDgsEVpY&#x3D;&quot;},&quot;url&quot;:&quot;&#x2F;lib&#x2F;pdf&#x2F;web&#x2F;viewer&quot;}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{&quot;enable&quot;:true,&quot;theme&quot;:&quot;forest&quot;,&quot;js&quot;:{&quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;mermaid@8.9.3&#x2F;dist&#x2F;mermaid.min.js&quot;,&quot;integrity&quot;:&quot;sha256-OyJHvRcZHaRR6Ig73ppxF4QXk8HzvfgTprRWkulCkfY&#x3D;&quot;}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>

  <script class="next-config" data-name="nprogress" type="application/json">{&quot;enable&quot;:true,&quot;spinner&quot;:true}</script>
  <script src="/js/third-party/nprogress.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.3/dist/katex.min.css" integrity="sha256-ZtdsMkDnoWbkrm82KV9pXHJCBx4mzAuAkBEMswmVH5M=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.3/dist/contrib/copy-tex.min.css" integrity="sha256-+oItviPaTmqjDhk4y4fLLUIMgRQYDV/ZyrRNvQiebWM=" crossorigin="anonymous">
  <script class="next-config" data-name="katex" type="application/json">{&quot;copy_tex_js&quot;:{&quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;katex@0.13.3&#x2F;dist&#x2F;contrib&#x2F;copy-tex.min.js&quot;,&quot;integrity&quot;:&quot;sha256-etSqbSVF4+Lwe8MGk&#x2F;Vanc1sR+mWv+qOG73fxWw9p94&#x3D;&quot;}}</script>
  <script src="/js/third-party/math/katex.js"></script>


<script class="next-config" data-name="utterances" type="application/json">{&quot;enable&quot;:true,&quot;repo&quot;:&quot;alohaia&#x2F;alohaia.github.io&quot;,&quot;issue_term&quot;:&quot;title&quot;,&quot;theme&quot;:&quot;preferred-color-scheme&quot;}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
